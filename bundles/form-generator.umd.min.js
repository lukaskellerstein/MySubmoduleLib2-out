!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("form-generator",["exports","@angular/core","@angular/forms","@angular/common"],e):e(t["form-generator"]={},t.ng.core,t.ng.forms,t.ng.common)}(this,function(t,e,n,o){"use strict";var r=function(){function t(t){this.fb=t,this.config=[],this.submit=new e.EventEmitter}return Object.defineProperty(t.prototype,"controls",{get:function(){return this.config.filter(function(t){return"button"!==t.type})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"changes",{get:function(){return this.form.valueChanges},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.form.valid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.form.value},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.form=this.createGroup()},t.prototype.ngOnChanges=function(){var n=this;if(this.form){var e=Object.keys(this.form.controls),o=this.controls.map(function(t){return t.name});e.filter(function(t){return!o.includes(t)}).forEach(function(t){return n.form.removeControl(t)}),o.filter(function(t){return!e.includes(t)}).forEach(function(e){var t=n.config.find(function(t){return t.name===e});n.form.addControl(e,n.createControl(t))})}},t.prototype.createGroup=function(){var e=this,n=this.fb.group({});return this.controls.forEach(function(t){return n.addControl(t.name,e.createControl(t))}),n},t.prototype.createControl=function(t){var e=t.disabled,n=t.validation,o=t.value;return this.fb.control({disabled:e,value:o},n)},t.prototype.handleSubmit=function(t){t.preventDefault(),t.stopPropagation(),this.submit.emit(this.value)},t.prototype.setDisabled=function(e,n){if(this.form.controls[e]){var t=n?"disable":"enable";this.form.controls[e][t]()}else this.config=this.config.map(function(t){return t.name===e&&(t.disabled=n),t})},t.prototype.setValue=function(t,e){this.form.controls[t].setValue(e,{emitEvent:!0})},t.decorators=[{type:e.Component,args:[{selector:"lib-dynamic-form",exportAs:"dynamicForm",template:'<form class="dynamic-form" [formGroup]="form" (submit)="handleSubmit($event)">\n  <ng-container *ngFor="let field of config | keyvalue;">\n    <ng-container dynamicField [config]="field.value" [name]="field.key" [group]="form">\n    </ng-container>\n  </ng-container>\n  <input *ngIf="true" type="submit" name="submit" value="Submit"> \n</form>',styles:[""]}]}],t.ctorParameters=function(){return[{type:n.FormBuilder}]},t.propDecorators={config:[{type:e.Input}],submit:[{type:e.Output}]},t}(),i=function(){function t(){}return t.prototype.onLinkClick=function(t){t.stopPropagation(),t.preventDefault()},t.decorators=[{type:e.Component,args:[{selector:"lib-object-link",template:'<a href="#" (click)="onLinkClick($event)">{{ config.name }}</a>'}]}],t}(),c=function(){function t(){}return t.decorators=[{type:e.Component,args:[{selector:"lib-my-button",template:'<div class="dynamic-field form-button" [formGroup]="group">\n  <button [disabled]="config.disabled" type="submit">\n    {{ config.label }}\n  </button>\n</div>',styles:[""]}]}],t}(),a=function(){function t(){}return t.decorators=[{type:e.Component,args:[{selector:"lib-my-input",template:'<div class="dynamic-field form-input" [formGroup]="group">\n  <label>{{ config.label }}</label>\n  <input type="text" [attr.placeholder]="config.placeholder" [formControlName]="config.name">\n</div>',styles:[""]}]}],t}(),u=function(){function t(){}return t.decorators=[{type:e.Component,args:[{selector:"lib-my-select",template:'<div class="dynamic-field form-select" [formGroup]="group">\n  <label>{{ config.label }}</label>\n  <select [formControlName]="config.name">\n    <option value="">{{ config.placeholder }}</option>\n    <option *ngFor="let option of config.options">\n      {{ option }}\n    </option>\n  </select>\n</div>',styles:[""]}]}],t}(),s={button:c,input:a,select:u,object:i},l=function(){function t(t,e){this.resolver=t,this.container=e}return t.prototype.ngOnChanges=function(){this.component&&(this.component.instance.config=this.config,this.component.instance.group=this.group)},t.prototype.ngOnInit=function(){if(!s[this.config.type]){var t=Object.keys(s).join(", ");throw new Error("Trying to use an unsupported type ("+this.config.type+").\n        Supported types: "+t)}var e=this.resolver.resolveComponentFactory(s[this.config.type]);this.component=this.container.createComponent(e),this.component.instance.config=this.buildFieldConfig(this.config),this.component.instance.group=this.group},t.prototype.buildFieldConfig=function(t){if(!t.name)return t.name=this.name,t.label||(t.label=this.name),t},t.decorators=[{type:e.Directive,args:[{selector:"[dynamicField]"}]}],t.ctorParameters=function(){return[{type:e.ComponentFactoryResolver},{type:e.ViewContainerRef}]},t.propDecorators={config:[{type:e.Input}],name:[{type:e.Input}],group:[{type:e.Input}]},t}(),p=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[o.CommonModule,n.FormsModule,n.ReactiveFormsModule],declarations:[a,c,u,i],exports:[a,c,u,i],entryComponents:[c,a,u,i]}]}],t}(),f=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[o.CommonModule,n.FormsModule,n.ReactiveFormsModule,p],declarations:[r,l],exports:[r,l]}]}],t}();t.DynamicFormComponent=r,t.DynamicFieldDirective=l,t.MyButtonComponent=c,t.MyInputComponent=a,t.MySelectComponent=u,t.ObjectLinkComponent=i,t.FormGeneratorModule=f,t.Éµa=p,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=form-generator.umd.min.js.map