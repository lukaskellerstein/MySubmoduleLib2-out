!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("form-generator",["exports","@angular/core","@angular/forms","@angular/common"],t):t(e["form-generator"]={},e.ng.core,e.ng.forms,e.ng.common)}(this,function(e,t,n,o){"use strict";var r=function(){function e(e){this.fb=e,this.config={},this.submit=new t.EventEmitter,this.objectGetKeys=Object.keys}return Object.defineProperty(e.prototype,"controls",{get:function(){var n=this,o=[];return Object.keys(this.config).forEach(function(e){var t=n.config[e];t.hasOwnProperty("name")||(t.name=e),o.push(t)}),o},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changes",{get:function(){return this.form.valueChanges},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this.form.valid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.form.value},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.form=this.createGroup()},e.prototype.ngOnChanges=function(){var n=this;this.form||(this.form=this.createGroup());var t=Object.keys(this.form.controls),o=this.controls.map(function(e){return e.name});t.filter(function(e){return!o.includes(e)}).forEach(function(e){return n.form.removeControl(e)}),o.filter(function(e){return!t.includes(e)}).forEach(function(t){var e=n.controls.find(function(e){return e.name===t});n.form.addControl(t,n.createControl(e))})},e.prototype.createGroup=function(){var t=this,n=this.fb.group({});return this.controls.forEach(function(e){return n.addControl(e.name,t.createControl(e))}),n},e.prototype.createControl=function(e){var t=e.disabled,n=e.validation,o=e.value;return this.fb.control({disabled:t,value:o},n)},e.prototype.handleSubmit=function(e){e.preventDefault(),e.stopPropagation(),this.submit.emit(this.value)},e.prototype.setDisabled=function(t,n){if(this.form.controls[t]){var e=n?"disable":"enable";this.form.controls[t][e]()}else this.config=this.controls.map(function(e){return e.name===t&&(e.disabled=n),e})},e.prototype.setValue=function(e,t){this.form.controls[e].setValue(t,{emitEvent:!0})},e.decorators=[{type:t.Component,args:[{selector:"lib-dynamic-form",exportAs:"dynamicForm",template:'<form class="dynamic-form" [formGroup]="form" (submit)="handleSubmit($event)">\n  <ng-container *ngFor="let fieldKey of objectGetKeys(config);">\n    key: {{ fieldKey }}\n    <ng-container dynamicField [config]="config[fieldKey]" [name]="fieldKey" [group]="form">\n    </ng-container>\n  </ng-container>\n  <input *ngIf="true" type="submit" name="submit" value="Submit"> \n</form>My ',styles:[""]}]}],e.ctorParameters=function(){return[{type:n.FormBuilder}]},e.propDecorators={config:[{type:t.Input}],submit:[{type:t.Output}]},e}(),i=function(){function e(){}return e.prototype.onLinkClick=function(e){e.stopPropagation(),e.preventDefault()},e.decorators=[{type:t.Component,args:[{selector:"lib-object-link",template:'<a href="#" (click)="onLinkClick($event)">{{ config.name }}</a>'}]}],e}(),c=function(){function e(){}return e.decorators=[{type:t.Component,args:[{selector:"lib-my-button",template:'<div class="dynamic-field form-button" [formGroup]="group">\n  <button [disabled]="config.disabled" type="submit">\n    {{ config.label }}\n  </button>\n</div>',styles:[""]}]}],e}(),a=function(){function e(){}return e.decorators=[{type:t.Component,args:[{selector:"lib-my-input",template:'<div class="dynamic-field form-input" [formGroup]="group">\n  <label>{{ config.label }}</label>\n  <input type="text" [attr.placeholder]="config.placeholder" [formControlName]="config.name">\n</div>',styles:[""]}]}],e}(),s=function(){function e(){}return e.decorators=[{type:t.Component,args:[{selector:"lib-my-select",template:'<div class="dynamic-field form-select" [formGroup]="group">\n  <label>{{ config.label }}</label>\n  <select [formControlName]="config.name">\n    <option value="">{{ config.placeholder }}</option>\n    <option *ngFor="let option of config.options">\n      {{ option }}\n    </option>\n  </select>\n</div>',styles:[""]}]}],e}(),u={button:c,input:a,select:s,object:i},l=function(){function e(e,t){this.resolver=e,this.container=t}return e.prototype.ngOnChanges=function(){this.component&&(this.component.instance.config=this.config,this.component.instance.group=this.group)},e.prototype.ngOnInit=function(){if(!u[this.config.type]){var e=Object.keys(u).join(", ");throw new Error("Trying to use an unsupported type ("+this.config.type+").\n        Supported types: "+e)}var t=this.resolver.resolveComponentFactory(u[this.config.type]);this.component=this.container.createComponent(t),this.component.instance.config=this.buildFieldConfig(this.config),this.component.instance.group=this.group},e.prototype.buildFieldConfig=function(e){if(!e.name)return e.name=this.name,e.label||(e.label=this.name),e},e.decorators=[{type:t.Directive,args:[{selector:"[dynamicField]"}]}],e.ctorParameters=function(){return[{type:t.ComponentFactoryResolver},{type:t.ViewContainerRef}]},e.propDecorators={config:[{type:t.Input}],name:[{type:t.Input}],group:[{type:t.Input}]},e}(),p=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,n.FormsModule,n.ReactiveFormsModule],declarations:[a,c,s,i],exports:[a,c,s,i],entryComponents:[c,a,s,i]}]}],e}(),f=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[o.CommonModule,n.FormsModule,n.ReactiveFormsModule,p],declarations:[r,l],exports:[r,l]}]}],e}();e.DynamicFormComponent=r,e.DynamicFieldDirective=l,e.MyButtonComponent=c,e.MyInputComponent=a,e.MySelectComponent=s,e.ObjectLinkComponent=i,e.FormGeneratorModule=f,e.Éµa=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=form-generator.umd.min.js.map