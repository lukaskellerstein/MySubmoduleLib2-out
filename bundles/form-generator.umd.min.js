!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("MySubmoduleLib1"),require("@angular/common")):"function"==typeof define&&define.amd?define("form-generator",["exports","@angular/core","@angular/forms","MySubmoduleLib1","@angular/common"],e):e(t["form-generator"]={},t.ng.core,t.ng.forms,null,t.ng.common)}(this,function(t,e,o,n,r){"use strict";var i=function(){function t(t){this.fb=t,this.config=[],this.submit=new e.EventEmitter}return Object.defineProperty(t.prototype,"controls",{get:function(){return this.config.filter(function(t){return"button"!==t.type})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"changes",{get:function(){return this.form.valueChanges},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valid",{get:function(){return this.form.valid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.form.value},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.form=this.createGroup()},t.prototype.ngOnChanges=function(){var o=this;if(this.form){var e=Object.keys(this.form.controls),n=this.controls.map(function(t){return t.name});e.filter(function(t){return!n.includes(t)}).forEach(function(t){return o.form.removeControl(t)}),n.filter(function(t){return!e.includes(t)}).forEach(function(e){var t=o.config.find(function(t){return t.name===e});o.form.addControl(e,o.createControl(t))})}},t.prototype.createGroup=function(){var e=this,o=this.fb.group({});return this.controls.forEach(function(t){return o.addControl(t.name,e.createControl(t))}),o},t.prototype.createControl=function(t){var e=t.disabled,o=t.validation,n=t.value;return this.fb.control({disabled:e,value:n},o)},t.prototype.handleSubmit=function(t){t.preventDefault(),t.stopPropagation(),this.submit.emit(this.value)},t.prototype.setDisabled=function(e,o){if(this.form.controls[e]){var t=o?"disable":"enable";this.form.controls[e][t]()}else this.config=this.config.map(function(t){return t.name===e&&(t.disabled=o),t})},t.prototype.setValue=function(t,e){this.form.controls[t].setValue(e,{emitEvent:!0})},t.decorators=[{type:e.Component,args:[{selector:"lib-dynamic-form",template:'<form class="dynamic-form" [formGroup]="form" (submit)="handleSubmit($event)">\n  <ng-container *ngFor="let field of config;" dynamicField [config]="field" [group]="form">\n  </ng-container>\n</form>',styles:[""]}]}],t.ctorParameters=function(){return[{type:o.FormBuilder}]},t.propDecorators={config:[{type:e.Input}],submit:[{type:e.Output}]},t}(),u={button:n.MyButtonComponent,input:n.MyInputComponent,select:n.MySelectComponent},c=function(){function t(t,e){this.resolver=t,this.container=e}return t.prototype.ngOnChanges=function(){this.component&&(this.component.instance.config=this.config,this.component.instance.group=this.group)},t.prototype.ngOnInit=function(){if(!u[this.config.type]){var t=Object.keys(u).join(", ");throw new Error("Trying to use an unsupported type ("+this.config.type+").\n        Supported types: "+t)}var e=this.resolver.resolveComponentFactory(u[this.config.type]);this.component=this.container.createComponent(e),this.component.instance.config=this.config,this.component.instance.group=this.group},t.decorators=[{type:e.Directive,args:[{selector:"[dynamicField]"}]}],t.ctorParameters=function(){return[{type:e.ComponentFactoryResolver},{type:e.ViewContainerRef}]},t.propDecorators={config:[{type:e.Input}],group:[{type:e.Input}]},t}(),s=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[r.CommonModule,o.FormsModule,o.ReactiveFormsModule,n.UiComponentsModule],declarations:[i,c],exports:[i,c]}]}],t}();t.DynamicFormComponent=i,t.FormGeneratorModule=s,t.Éµa=c,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=form-generator.umd.min.js.map