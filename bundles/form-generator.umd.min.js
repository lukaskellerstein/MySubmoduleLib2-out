!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("form-generator",["exports","@angular/core","@angular/forms","@angular/common"],t):t(e["form-generator"]={},e.ng.core,e.ng.forms,e.ng.common)}(this,function(e,t,o,n){"use strict";var r=function(){function e(e){this.fb=e,this.config={},this.submit=new t.EventEmitter,this.objectGetKeys=Object.keys}return Object.defineProperty(e.prototype,"controls",{get:function(){var o=this,n=[];return Object.keys(this.config).forEach(function(e){var t=o.config[e];t.hasOwnProperty("name")||(t.name=e),n.push(t)}),n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changes",{get:function(){return this.form.valueChanges},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valid",{get:function(){return this.form.valid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.form.value},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.form=this.createGroup()},e.prototype.ngOnChanges=function(){var o=this;this.form||(this.form=this.createGroup());var t=Object.keys(this.form.controls),n=this.controls.map(function(e){return e.name});t.filter(function(e){return!n.includes(e)}).forEach(function(e){return o.form.removeControl(e)}),n.filter(function(e){return!t.includes(e)}).forEach(function(t){var e=o.controls.find(function(e){return e.name===t});o.form.addControl(t,o.createControl(e))})},e.prototype.createGroup=function(){var t=this,o=this.fb.group({});return this.controls.forEach(function(e){return o.addControl(e.name,t.createControl(e))}),o},e.prototype.createControl=function(e){var t=e.disabled,o=e.validation,n=e.value;return this.fb.control({disabled:t,value:n},o)},e.prototype.handleSubmit=function(e){e.preventDefault(),e.stopPropagation(),this.submit.emit(this.value)},e.prototype.setDisabled=function(t,o){if(this.form.controls[t]){var e=o?"disable":"enable";this.form.controls[t][e]()}else this.config=this.controls.map(function(e){return e.name===t&&(e.disabled=o),e})},e.prototype.setValue=function(e,t){this.form.controls[e].setValue(t,{emitEvent:!0})},e.decorators=[{type:t.Component,args:[{selector:"lib-dynamic-form",exportAs:"dynamicForm",template:'<form class="dynamic-form" [formGroup]="form" (submit)="handleSubmit($event)">\n  <ng-container *ngFor="let fieldKey of objectGetKeys(config);">\n    key: {{ fieldKey }}\n    <ng-container dynamicField [config]="config[fieldKey]" [name]="fieldKey" [group]="form">\n    </ng-container>\n  </ng-container>\n  <input *ngIf="true" type="submit" name="submit" value="Submit"> \n</form>My ',styles:[""]}]}],e.ctorParameters=function(){return[{type:o.FormBuilder}]},e.propDecorators={config:[{type:t.Input}],submit:[{type:t.Output}]},e}(),i=function(){function e(){}return e.prototype.onLinkClick=function(e){e.stopPropagation(),e.preventDefault()},e.decorators=[{type:t.Component,args:[{selector:"lib-object-link",template:'<a href="#" (click)="onLinkClick($event)">{{ config | json }}</a>'}]}],e}(),c=function(){function e(){}return e.decorators=[{type:t.Component,args:[{selector:"lib-my-button",template:'<div class="dynamic-field form-button" [formGroup]="group">\n  <button [disabled]="config.disabled" type="submit">\n    {{ config.label }}\n  </button>\n</div>',styles:[""]}]}],e}(),a=function(){function e(){}return e.decorators=[{type:t.Component,args:[{selector:"lib-my-input",template:'<div class="dynamic-field form-input" [formGroup]="group">\n  <label>{{ config.label }}</label>\n  <input type="text" [attr.placeholder]="config.placeholder" [formControlName]="config.name">\n</div>',styles:[""]}]}],e}(),s=function(){function e(){}return e.decorators=[{type:t.Component,args:[{selector:"lib-my-select",template:'<div class="dynamic-field form-select" [formGroup]="group">\n  <label>{{ config.label }}</label>\n  <select [formControlName]="config.name">\n    <option value="">{{ config.placeholder }}</option>\n    <option *ngFor="let option of config.options">\n      {{ option }}\n    </option>\n  </select>\n</div>',styles:[""]}]}],e}(),u={button:c,input:a,select:s,object:i},l=function(){function e(e,t){this.resolver=e,this.container=t}return e.prototype.ngOnChanges=function(){this.component&&(this.component.instance.config=this.config,this.component.instance.group=this.group)},e.prototype.ngOnInit=function(){if(!u[this.config.type]){var e=Object.keys(u).join(", ");throw new Error("Trying to use an unsupported type ("+this.config.type+").\n        Supported types: "+e)}var t=this.resolver.resolveComponentFactory(u[this.config.type]);this.component=this.container.createComponent(t),this.component.instance.config=this.buildFieldConfig(this.config),this.component.instance.group=this.group},e.prototype.buildFieldConfig=function(e){if(!e.name)return e.name=this.name,e.label||(e.label=this.name),e},e.decorators=[{type:t.Directive,args:[{selector:"[dynamicField]"}]}],e.ctorParameters=function(){return[{type:t.ComponentFactoryResolver},{type:t.ViewContainerRef}]},e.propDecorators={config:[{type:t.Input}],name:[{type:t.Input}],group:[{type:t.Input}]},e}(),p=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule,o.FormsModule,o.ReactiveFormsModule],declarations:[a,c,s,i],exports:[a,c,s,i],entryComponents:[c,a,s,i]}]}],e}(),f=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule,o.FormsModule,o.ReactiveFormsModule,p],declarations:[r,l],exports:[r,l]}]}],e}();e.DynamicFormComponent=r,e.DynamicFieldDirective=l,e.MyButtonComponent=c,e.MyInputComponent=a,e.MySelectComponent=s,e.ObjectLinkComponent=i,e.FormGeneratorModule=f,e.Éµa=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=form-generator.umd.min.js.map