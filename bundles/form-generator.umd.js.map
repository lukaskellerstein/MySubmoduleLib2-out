{"version":3,"file":"form-generator.umd.js.map","sources":["ng://form-generator/lib/dynamic-form/dynamic-form.component.ts","ng://form-generator/lib/dynamic-field/widgets/object-link/object-link.component.ts","ng://form-generator/lib/dynamic-field/widgets/my-button/my-button.component.ts","ng://form-generator/lib/dynamic-field/widgets/my-input/my-input.component.ts","ng://form-generator/lib/dynamic-field/widgets/my-select/my-select.component.ts","ng://form-generator/lib/dynamic-field/dynamic-field.directive.ts","ng://form-generator/lib/dynamic-field/widgets/widgets.module.ts","ng://form-generator/lib/form-generator.module.ts"],"sourcesContent":["import { Component, OnInit, OnChanges, EventEmitter, Input, Output } from '@angular/core';\nimport { FormGroup, FormBuilder, FormControl } from '@angular/forms';\n\nimport { Observable } from 'rxjs';\nimport { FieldConfig } from '../dynamic-field/widgets/base/field.config';\n\n@Component({\n  selector: 'lib-dynamic-form',\n  exportAs: 'dynamicForm',\n  template: `<form class=\"dynamic-form\" [formGroup]=\"form\" (submit)=\"handleSubmit($event)\">\n  <ng-container *ngFor=\"let fieldKey of objectGetKeys(config);\">\n    key: {{ fieldKey }}\n    <ng-container dynamicField [config]=\"config[fieldKey]\" [name]=\"fieldKey\" [group]=\"form\">\n    </ng-container>\n  </ng-container>\n  <input *ngIf=\"true\" type=\"submit\" name=\"submit\" value=\"Submit\"> \n</form>`,\n  styles: [``]\n})\nexport class DynamicFormComponent implements OnChanges, OnInit {\n  @Input()\n  config: FieldConfig[] = [];\n\n  @Output()\n  submit: EventEmitter<any> = new EventEmitter<any>();\n\n  form: FormGroup;\n\n  get controls() { return this.config.filter(({type}) => type !== 'button'); }\n  get changes(): Observable<any> { return this.form.valueChanges; }\n  get valid() { return this.form.valid; }\n  get value(): any { return this.form.value; }\n\n  objectGetKeys = Object.keys;\n  \n  constructor(private fb: FormBuilder) {}\n\n  ngOnInit() {\n    this.form = this.createGroup();\n  }\n\n  ngOnChanges() {\n    if (this.form) {\n      const controls = Object.keys(this.form.controls);\n      const configControls = this.controls.map((item) => item.name);\n\n      controls\n        .filter((control) => !configControls.includes(control))\n        .forEach((control) => this.form.removeControl(control));\n\n      configControls\n        .filter((control) => !controls.includes(control))\n        .forEach((name) => {\n          const config = this.config.find((control) => control.name === name);\n          this.form.addControl(name, this.createControl(config));\n        });\n\n    }\n  }\n\n  createGroup() {\n    const group = this.fb.group({});\n    this.controls.forEach(control => group.addControl(control.name, this.createControl(control)));\n    return group;\n  }\n\n  createControl(config: FieldConfig): FormControl {\n    const { disabled, validation, value } = config;\n    return this.fb.control({ disabled, value }, validation);\n  }\n\n  handleSubmit(event: Event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.submit.emit(this.value);\n  }\n\n  setDisabled(name: string, disable: boolean) {\n    if (this.form.controls[name]) {\n      const method = disable ? 'disable': 'enable';\n      this.form.controls[name][method]();\n      return;\n    }\n\n    this.config = this.config.map((item) => {\n      if (item.name === name) {\n        item.disabled = disable;\n      }\n      return item;\n    });\n  }\n\n  setValue(name: string, value: any) {\n    this.form.controls[name].setValue(value, {emitEvent: true});\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { FieldConfig } from '../base/field.config';\nimport { FormGroup } from '@angular/forms';\nimport { Field } from '../base/field';\n\n@Component({\n  selector: 'lib-object-link',\n  template: `<a href=\"#\" (click)=\"onLinkClick($event)\">{{ config.name }}</a>`\n})\nexport class ObjectLinkComponent implements Field  {\n\n  config: FieldConfig;\n  group: FormGroup;\n\n  onLinkClick(ev){\n    // TODO: trigger event to add new form to forms container \n    ev.stopPropagation();\n    ev.preventDefault();\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Field } from '../base/field';\nimport { FieldConfig } from '../base/field.config';\nimport { FormGroup } from '@angular/forms';\n\n@Component({\n  selector: 'lib-my-button',\n  template: `<div class=\"dynamic-field form-button\" [formGroup]=\"group\">\n  <button [disabled]=\"config.disabled\" type=\"submit\">\n    {{ config.label }}\n  </button>\n</div>`,\n  styles: [``]\n})\nexport class MyButtonComponent implements Field {\n  config: FieldConfig;\n  group: FormGroup;\n}\n","import { Component, OnInit } from '@angular/core';\nimport { FieldConfig } from '../base/field.config';\nimport { FormGroup } from '@angular/forms';\nimport { Field } from '../base/field';\n\n@Component({\n  selector: 'lib-my-input',\n  template: `<div class=\"dynamic-field form-input\" [formGroup]=\"group\">\n  <label>{{ config.label }}</label>\n  <input type=\"text\" [attr.placeholder]=\"config.placeholder\" [formControlName]=\"config.name\">\n</div>`,\n  styles: [``]\n})\nexport class MyInputComponent implements Field  {\n\n  config: FieldConfig;\n  group: FormGroup;\n\n  \n\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Field } from '../base/field';\nimport { FieldConfig } from '../base/field.config';\nimport { FormGroup } from '@angular/forms';\n\n@Component({\n  selector: 'lib-my-select',\n  template: `<div class=\"dynamic-field form-select\" [formGroup]=\"group\">\n  <label>{{ config.label }}</label>\n  <select [formControlName]=\"config.name\">\n    <option value=\"\">{{ config.placeholder }}</option>\n    <option *ngFor=\"let option of config.options\">\n      {{ option }}\n    </option>\n  </select>\n</div>`,\n  styles: [``]\n})\nexport class MySelectComponent implements Field {\n\n  config: FieldConfig;\n  group: FormGroup;\n\n}\n","import { ComponentFactoryResolver, ComponentRef, Directive, Input, OnChanges, OnInit, Type, ViewContainerRef } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\n\nimport { ObjectLinkComponent } from './widgets/object-link/object-link.component';\nimport { Field } from './widgets/base/field';\nimport { MyButtonComponent } from './widgets/my-button/my-button.component';\nimport { MyInputComponent } from './widgets/my-input/my-input.component';\nimport { MySelectComponent } from './widgets/my-select/my-select.component';\nimport { FieldConfig } from './widgets/base/field.config';\n\nconst components: { [type: string]: Type<Field> } = {\n  button: MyButtonComponent,\n  input: MyInputComponent,\n  select: MySelectComponent,\n  object: ObjectLinkComponent\n};\n\n@Directive({\n  selector: '[dynamicField]'\n})\nexport class DynamicFieldDirective implements Field, OnChanges, OnInit {\n  @Input()\n  config: FieldConfig;\n\n  @Input()\n  name: string;\n\n  @Input()\n  group: FormGroup;\n\n  component: ComponentRef<Field>;\n\n  constructor(\n    private resolver: ComponentFactoryResolver,\n    private container: ViewContainerRef\n  ) { }\n\n  ngOnChanges() {\n    if (this.component) {\n      this.component.instance.config = this.config;\n      this.component.instance.group = this.group;\n    }\n  }\n\n  ngOnInit() {\n    if (!components[this.config.type]) {\n      const supportedTypes = Object.keys(components).join(', ');\n      throw new Error(\n        `Trying to use an unsupported type (${this.config.type}).\n        Supported types: ${supportedTypes}`\n      );\n    }\n    const component = this.resolver.resolveComponentFactory<Field>(components[this.config.type]);\n    this.component = this.container.createComponent(component);\n    this.component.instance.config = this.buildFieldConfig(this.config)\n    this.component.instance.group = this.group;\n  }\n\n  buildFieldConfig(config) {\n    if (!config.name) {\n      config.name = this.name;\n\n      if (!config.label) {\n        config.label = this.name;\n      }\n      // TODO further field config prerender changes\n      return config;\n\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { MyInputComponent } from './my-input/my-input.component';\nimport { MyButtonComponent } from './my-button/my-button.component';\nimport { MySelectComponent } from './my-select/my-select.component';\nimport { ObjectLinkComponent } from './object-link/object-link.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  declarations: [MyInputComponent, MyButtonComponent, MySelectComponent, ObjectLinkComponent],\n  exports: [MyInputComponent, MyButtonComponent, MySelectComponent, ObjectLinkComponent],\n  entryComponents: [MyButtonComponent, MyInputComponent, MySelectComponent, ObjectLinkComponent]\n})\nexport class WidgetsModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { DynamicFormComponent } from './dynamic-form/dynamic-form.component';\nimport { DynamicFieldDirective } from './dynamic-field/dynamic-field.directive';\nimport { WidgetsModule } from './dynamic-field/widgets/widgets.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    WidgetsModule\n  ],\n  declarations: [DynamicFormComponent, DynamicFieldDirective],\n  exports: [DynamicFormComponent, DynamicFieldDirective]\n})\nexport class FormGeneratorModule { }\n"],"names":["EventEmitter","Component","FormBuilder","Input","Output","Directive","ComponentFactoryResolver","ViewContainerRef","NgModule","CommonModule","FormsModule","ReactiveFormsModule"],"mappings":"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"}
